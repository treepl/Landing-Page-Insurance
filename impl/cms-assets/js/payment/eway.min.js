'use strict';(function(){function l(){var a=document.forms;let b=document.scripts,d="",f=[];var c=window.paymentGatewaySettings;let n={fonts:["Lobster"],rows:m(c,{1:[[["name","card","expiry","cvn"]]],2:[[["name","card","expiry"],["cvn"]],[["name","card"],["expiry","cvn"]],[["name"],["card","expiry","cvn"]]],3:[[["name","card"],["expiry"],["cvn"]],[["name"],["card","expiry"],["cvn"]],[["name"],["card"],["expiry","cvn"]]],4:[[["name"]],[["card"]],[["expiry"]],[["cvn"]]]}[c.rows][+c.cells-1])};for(c=
0;c<a.length;c++)if(a[c].elements.Payment_Data){let g=a[c];var e=g.getAttribute("name");let b=`${e}_${c}`,d=document.getElementById(`paymentFields_${e}`);e=document.getElementById(`paymentErrors_${e}`);d.id=`paymentFields_${b}`;e.id=`paymentErrors_${b}`;g.setAttribute("name",b);f.push(a[c])}for(a=0;a<b.length;a++)if(-1!==b[a].src.indexOf("/cms-assets/js/payment/eway.min.js")){d=p(b[a].src,"key");break}f&&f.forEach((a)=>{function b(b){b.fieldValid?(h="",a.elements.Payment_Data.value=b.secureFieldCode):
(h=b.errors,a.elements.Payment_Data.value="")}function c(){a.submit()}function f(a,b){if("CreditCard"===b)a.style.display="block";else if("Free"===b||"Offline"===b)a.style.display="none"}var e=a.getAttribute("name");let g=`paymentFields_${e}`,k=document.getElementById(`paymentFields_${e}`);e={publicApiKey:d,fieldDivId:g,fieldType:"group",layout:n};let h="";a.elements.Payment_Data.value="";(function(a,c){let f=!1;for(let a=0;a<c.length;a++)if("CreditCard"===c[a].getAttribute("value")){f=!0;break}f&&
(d?window.eWAY.setupSecureField(a,b):alert("Missing eWay key"))})(e,a.elements.Payment_Type.options);f(k,a.elements.Payment_Type.value);a.elements.Payment_Type.onchange=function(a){a.preventDefault();f(k,a.target.value)};a.addEventListener("submit",function(b){b.preventDefault();b=b.target;"CreditCard"===b.elements.Payment_Type.value?h.length?alert(q(h)):b.elements.Payment_Data.value.length?window.eWAY.saveAllFields(c,2E3):alert("CARDHOLDERNAME Required\nCARDNUMBER Required\nCARDCVN Required\nInvalid Expiry Date"):
a.submit()})})}function r(){let a=document.querySelectorAll('[name="Payment_ItemQuantity"]');for(let b=0;b<a.length;b++)a[b].onchange=function(a){a.preventDefault();let b=a.target.closest("form").Payment_Amount;a=+a.target.dataset.event_one_item_price*+a.target.value;for(let c=0;c<b.length;c++)b[c].value=a}}function q(a){let b="",d={V6021:"CARDHOLDERNAME Required",V6022:"CARDNUMBER Required",V6023:"CARDCVN Required",V6033:"Invalid Expiry Date"};a.split(" ").forEach(function(a){b=d[a]?b+`${d[a]}\n`:
b+`${a}\n`});return b}function p(a,b){a=new URL(a);return(new URLSearchParams(a.search)).get(b)}function m(a,b){let d=+a.rows,f=[];for(let c=0;c<d;c++){let d=b[c],e=[];for(let b=0;b<d.length;b++)e.push({field:{fieldType:d[b],styles:a.fieldStyles,autocomplete:a.autocomplete,fieldColSpan:a.fieldColSpan,divStyles:a.fieldDivStyles},styles:a.cellStyles,colSpan:a.cellColSpan});f.push({cells:e,styles:a.rowStyles})}return f}document.addEventListener("DOMContentLoaded",function(a){l();r()})})();
