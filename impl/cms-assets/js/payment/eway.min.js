'use strict';(function(){function m(){var a=document.forms;let c=document.scripts,d="",e=[];var b=window.paymentGatewaySettings;if(b){var g={1:[[["name","card","expiry","cvn"]]],2:[[["name","card","expiry"],["cvn"]],[["name","card"],["expiry","cvn"]],[["name"],["card","expiry","cvn"]]],3:[[["name","card"],["expiry"],["cvn"]],[["name"],["card","expiry"],["cvn"]],[["name"],["card"],["expiry","cvn"]]],4:[[["name"]],[["card"]],[["expiry"]],[["cvn"]]]}[b.rows][+b.cells-1];b=n(b,g)}else b=[{cells:[{field:{fieldType:"name",
styles:"line-height: 1; height: 47px; border: 1px solid #cbcbcb; color: #000; padding: 15px 22px 12px; border-radius:0;margin-bottom:21px;box-shadow:none",autocomplete:"true",fieldColSpan:12,divStyles:"padding:0 7px;"}},{field:{fieldType:"card",styles:"line-height: 1; height: 47px; border: 1px solid #cbcbcb; color: #000; padding: 15px 22px 12px; border-radius:0;margin-bottom:21px;box-shadow:none",autocomplete:"true",fieldColSpan:12,divStyles:"padding:0 7px"}}]},{cells:[{field:{fieldType:"expiry",
styles:"line-height: 1; height: 47px; border: 1px solid #cbcbcb; color: #000; padding: 15px 22px 12px; border-radius:0;margin-bottom:21px;box-shadow:none",autocomplete:"true",fieldColSpan:12,divStyles:"padding:0 7px"}},{field:{fieldType:"cvn",styles:"line-height: 1; height: 47px; border: 1px solid #cbcbcb; color: #000; padding: 15px 22px 12px; border-radius:0;margin-bottom:21px;box-shadow:none",autocomplete:"true",fieldColSpan:12,divStyles:"padding:0 7px"}}]}];let h={fonts:["Lobster"],rows:b};for(b=
0;b<a.length;b++)if(a[b].elements.Payment_Data){g=a[b];var f=g.getAttribute("name");let c=`${f}_${b}`,d=document.getElementById(`paymentFields_${f}`);f=document.getElementById(`paymentErrors_${f}`);d.id=`paymentFields_${c}`;f.id=`paymentErrors_${c}`;g.setAttribute("name",c);e.push(a[b])}for(a=0;a<c.length;a++)if(-1!==c[a].src.indexOf("/cms-assets/js/payment/eway.min.js")){d=p(c[a].src,"key");break}e&&e.forEach((a)=>{function b(b){b.fieldValid?(k="",a.elements.Payment_Data.value=b.secureFieldCode):
(k=b.errors,a.elements.Payment_Data.value="")}function c(){a.submit()}function e(a,b){if("CreditCard"===b)a.style.display="block";else if("Free"===b||"Offline"===b)a.style.display="none"}var f=a.getAttribute("name");let g=`paymentFields_${f}`,l=document.getElementById(`paymentFields_${f}`);f={publicApiKey:d,fieldDivId:g,fieldType:"group",layout:h};let k="";a.elements.Payment_Data.value="";(function(a,c){let e=!1;for(let a=0;a<c.length;a++)if("CreditCard"===c[a].getAttribute("value")){e=!0;break}e&&
(d?window.eWAY.setupSecureField(a,b):alert("Missing eWay key"))})(f,a.elements.Payment_Type.options);e(l,a.elements.Payment_Type.value);a.elements.Payment_Type.onchange=function(a){a.preventDefault();e(l,a.target.value)};a.addEventListener("submit",function(b){b.preventDefault();b=b.target;"CreditCard"===b.elements.Payment_Type.value?k.length?alert(q(k)):b.elements.Payment_Data.value.length?window.eWAY.saveAllFields(c,2E3):alert("CARDHOLDERNAME Required\nCARDNUMBER Required\nCARDCVN Required\nInvalid Expiry Date"):
a.submit()})})}function r(){let a=document.querySelectorAll('[name="Payment_ItemQuantity"]');for(let c=0;c<a.length;c++)a[c].onchange=function(a){a.preventDefault();let c=a.target.closest("form").Payment_Amount;a=+a.target.dataset.event_one_item_price*+a.target.value;for(let b=0;b<c.length;b++)c[b].value=a}}function q(a){let c="",d={V6021:"CARDHOLDERNAME Required",V6022:"CARDNUMBER Required",V6023:"CARDCVN Required",V6033:"Invalid Expiry Date"};a.split(" ").forEach(function(a){c=d[a]?c+`${d[a]}\n`:
c+`${a}\n`});return c}function p(a,c){a=new URL(a);return(new URLSearchParams(a.search)).get(c)}function n(a,c){let d=+a.rows,e=[];for(let b=0;b<d;b++){let d=c[b],h=[];for(let b=0;b<d.length;b++)h.push({field:{fieldType:d[b],styles:a.fieldStyles,autocomplete:a.autocomplete,fieldColSpan:a.fieldColSpan,divStyles:a.fieldDivStyles},styles:a.cellStyles,colSpan:a.cellColSpan});e.push({cells:h,styles:a.rowStyles})}return e}document.addEventListener("DOMContentLoaded",function(a){m();r()})})();
