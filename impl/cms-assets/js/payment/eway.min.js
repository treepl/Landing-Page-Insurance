'use strict';(function(){function q(){var b=document.forms;let d=document.scripts,f="",h=[];var e=window.paymentGatewaySettings;if(e){var g={1:[[["name","card","expiry","cvn"]]],2:[[["name","card","expiry"],["cvn"]],[["name","card"],["expiry","cvn"]],[["name"],["card","expiry","cvn"]]],3:[[["name","card"],["expiry"],["cvn"]],[["name"],["card","expiry"],["cvn"]],[["name"],["card"],["expiry","cvn"]]],4:[[["name"]],[["card"]],[["expiry"]],[["cvn"]]]}[e.rows][+e.cells-1];e=r(e,g)}else e=[{cells:[{field:{fieldType:"name",
styles:"line-height: 1; height: 47px; border: 1px solid #cbcbcb; color: #000; padding: 15px 22px 12px; border-radius:0;margin-bottom:21px;box-shadow:none",autocomplete:"true",fieldColSpan:12,divStyles:"padding:0 7px;"}},{field:{fieldType:"card",styles:"line-height: 1; height: 47px; border: 1px solid #cbcbcb; color: #000; padding: 15px 22px 12px; border-radius:0;margin-bottom:21px;box-shadow:none",autocomplete:"true",fieldColSpan:12,divStyles:"padding:0 7px"}}]},{cells:[{field:{fieldType:"expiry",
styles:"line-height: 1; height: 47px; border: 1px solid #cbcbcb; color: #000; padding: 15px 22px 12px; border-radius:0;margin-bottom:21px;box-shadow:none",autocomplete:"true",fieldColSpan:12,divStyles:"padding:0 7px"}},{field:{fieldType:"cvn",styles:"line-height: 1; height: 47px; border: 1px solid #cbcbcb; color: #000; padding: 15px 22px 12px; border-radius:0;margin-bottom:21px;box-shadow:none",autocomplete:"true",fieldColSpan:12,divStyles:"padding:0 7px"}}]}];let t={fonts:["Lobster"],rows:e};for(e=
0;e<b.length;e++)if(b[e].elements.Payment_Data){g=b[e];var k=g.getAttribute("name");let c=`${k}_${e}`,d=document.getElementById(`paymentFields_${k}`);k=document.getElementById(`paymentErrors_${k}`);d.id=`paymentFields_${c}`;k.id=`paymentErrors_${c}`;g.setAttribute("name",c);h.push(b[e])}for(b=0;b<d.length;b++)if(-1!==d[b].src.indexOf("/cms-assets/js/payment/eway.min.js")){f=n(d[b].src,"key");break}h&&h.forEach((c)=>{function b(a){a.fieldValid?(l="",c.elements.Payment_Data.value=a.secureFieldCode):
(l=a.errors,c.elements.Payment_Data.value="")}function e(){c.dispatchEvent(c.CMS_CustomSubmit)}function d(a,b){"CreditCard"===b?(a.style.display="block",a.dataset.paymentEnabled=!0):(a.style.display="none",a.dataset.paymentEnabled=!1)}function h(a){a=a.form;"CreditCard"===a.elements.Payment_Type.value&&""===a.Payment_Data.value?l.length?(alert(u(l)),a.dataset.form_submitted=!1):a.elements.Payment_Data.value.length?window.eWAY.saveAllFields(e,2E3):(alert("CARDHOLDERNAME Required\nCARDNUMBER Required\nCARDCVN Required\nInvalid Expiry Date"),
a.dataset.form_submitted=!1):c.dispatchEvent(c.CMS_CustomSubmit)}function k(a){null===n(a.action,"jsonResponse")&&(a.action+=v(a.action)?"&":"?",a.action+="jsonResponse=1");fetch(a.action,{method:"POST",body:new FormData(a)}).then(function(a){return a.json()}).then(function(b){if(b.Error&&0!=b.Error)alert(b.ErrorMessages.join("\r\n")),a.dataset.form_submitted=!1;else if(b.FormRedirectLink&&""!==b.FormRedirectLink){let d="SuccessPage";"Paypal"===c.elements.Payment_Type.value&&(d="PaymentRedirect");
c.CMS_AfterFormPaymentHandled.data={FormRedirectLink:b.FormRedirectLink,LinkType:d,Response:b};a.dispatchEvent(a.CMS_AfterFormPaymentHandled)}})}var g=c.getAttribute("name"),m=`paymentFields_${g}`;let p=document.getElementById(`paymentFields_${g}`);g={publicApiKey:f,fieldDivId:m,fieldType:"group",layout:t};m=c["g-recaptcha-response-v3"]?"customFormSubmit":"submit";let l="";c.elements.Payment_Data.value="";c.dataset.form_submitted=!1;(function(a,c){let d=!1;for(let a=0;a<c.length;a++)if("CreditCard"===
c[a].getAttribute("value")){d=!0;break}d&&(f?window.eWAY.setupSecureField(a,b):alert("Missing eWay key"))})(g,c.elements.Payment_Type.options);d(p,c.elements.Payment_Type.value);c.elements.Payment_Type.onchange=function(a){a.preventDefault();d(p,a.target.value)};c.addEventListener(m,function(a){a.preventDefault();a=a.target;if("true"!==a.dataset.form_submitted){c.CMS_AfterFormPaymentHandled=new Event("CMS_AfterFormPaymentHandled",{cancelable:!0});a.CMS_CustomSubmit||(c.CMS_CustomSubmit=new Event("CMS_CustomSubmit",
{cancelable:!0}));a.dataset.form_submitted=!0;c.CMS_CustomSubmit.data={form:c};if("CreditCard"===a.elements.Payment_Type.value)return h(c.CMS_CustomSubmit.data),!1;c.dispatchEvent(c.CMS_CustomSubmit)}else alert("Form submission is in progress.")});c.addEventListener("CMS_CustomSubmit",function(a){a.defaultPrevented?a.data.form.dataset.form_submitted=!1:k(a.data.form)});c.addEventListener("CMS_triggerHandlePayment",function(a){if(a.data.response&&a.data.response.FormRedirectLink&&""!==a.data.response.FormRedirectLink){let b=
"SuccessPage";"Paypal"===c.elements.Payment_Type.value&&(b="PaymentRedirect");c.CMS_AfterFormPaymentHandled.data={FormRedirectLink:a.data.response.FormRedirectLink,LinkType:b,Response:a.data.response};a.data.submitData.form.dispatchEvent(a.data.submitData.form.CMS_AfterFormPaymentHandled)}else h(a.data.submitData)});c.addEventListener("CMS_AfterFormPaymentHandled",function(a){a.defaultPrevented||(window.location=a.data.FormRedirectLink)})})}function u(b){let d="",f={V6021:"CARDHOLDERNAME Required",
V6022:"CARDNUMBER Required",V6023:"CARDCVN Required",V6033:"Invalid Expiry Date"};b.split(" ").forEach(function(b){d=f[b]?d+`${f[b]}\n`:d+`${b}\n`});return d}function n(b,d){b=new URL(b);return(new URLSearchParams(b.search)).get(d)}function v(b){b=new URL(b);b=new URLSearchParams(b.search);let d=0;for(let f of b)d++;return d}function r(b,d){let f=+b.rows,h=[];for(let e=0;e<f;e++){let g=d[e],f=[];for(let d=0;d<g.length;d++)f.push({field:{fieldType:g[d],styles:b.fieldStyles,autocomplete:b.autocomplete,
fieldColSpan:b.fieldColSpan,divStyles:b.fieldDivStyles},styles:b.cellStyles,colSpan:b.cellColSpan});h.push({cells:f,styles:b.rowStyles})}return h}document.addEventListener("DOMContentLoaded",function(b){setTimeout(()=>{q()},0)})})();
