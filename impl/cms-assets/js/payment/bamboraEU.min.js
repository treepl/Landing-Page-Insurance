'use strict';(function(){function l(){function d(b,a){"CreditCard"===a?(b.style.display="block",b.dataset.paymentEnabled=!0):(b.style.display="none",b.dataset.paymentEnabled=!1)}let e=document.forms,g=[];var a=document.scripts;let h;for(var c=0;c<a.length;c++)if(-1!==a[c].src.indexOf("/cms-assets/js/payment/bamboraEU.min.js")){h=k(a[c].src,"checkout_integration");break}for(a=0;a<e.length;a++)if(e[a].elements.Payment_Data){c=e[a];var f=c.getAttribute("name");let b=`${f}_${a}`,d=document.getElementById(`paymentFields_${f}`);
f=document.getElementById(`paymentErrors_${f}`);d.id=`paymentFields_${b}`;f.id=`paymentErrors_${b}`;c.setAttribute("name",b);g.push(e[a])}g&&g.forEach((b,a)=>{a=b.getAttribute("name");let c=document.getElementById(`paymentFields_${a}`);a=b["g-recaptcha-response-v3"]?"customFormSubmit":"submit";b.dataset.form_submitted=!1;d(c,b.elements.Payment_Type.value);b.addEventListener(a,function(a){a.preventDefault();a=a.target;if("true"!==a.dataset.form_submitted){a.dataset.form_submitted=!0;if("CreditCard"===
a.elements.Payment_Type.value){let b=k(a.action,"form");fetch(`/bambora/token?form=${b}`,{method:"POST",body:new FormData(a)}).then(function(a){return a.json()}).then(function(a){if("Modal"===h){let b=new Bambora.ModalCheckout(a);b.on(Bambora.Event.Close,function(a){window.location=a.acceptUrl});setTimeout(()=>{b.show()},100)}else if("Inline"===h){let b=new Bambora.InlineCheckout(a);c.classList.add("bambora-inline-holder");b.on("*",function(a,b){"authorize"===a&&(window.location=b.acceptUrl)});setTimeout(()=>
{b.mount(c)},100)}});return!1}b.submit()}else alert("Form submission is in progress.")})})}function k(d,e){d=new URL(d);return(new URLSearchParams(d.search)).get(e)}document.addEventListener("DOMContentLoaded",function(d){l()})})();
