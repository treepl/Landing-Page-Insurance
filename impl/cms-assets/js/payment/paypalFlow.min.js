'use strict';(function(){function h(){let b=document.forms,d=[];for(let a=0;a<b.length;a++)if(b[a].elements.Payment_Data){let f=b[a],g=f.getAttribute("name"),e=`${g}_${a}`;document.getElementById(`paymentFields_${g}`).id=`paymentFields_${e}`;f.setAttribute("name",e);d.push(b[a])}d&&d.forEach((a)=>{function b(c){null===k(a.action,"jsonResponse")&&(a.action+=l(a.action)?"&":"?",a.action+="jsonResponse=1");fetch(a.action,{method:"POST",body:new FormData(a)}).then(function(a){return a.json()}).then(function(a){d(a,
c)})}function d(c,b){c.Error&&0!=c.Error?(alert(c.ErrorMessages.join("\r\n")),a.dataset.form_submitted=!1):c.FormRedirectLink&&""!==c.FormRedirectLink&&(b="SuccessPage","Paypal"===a.elements.Payment_Type.value&&(b="PaymentRedirect"),a.CMS_AfterFormPaymentHandled.data={FormRedirectLink:c.FormRedirectLink,LinkType:b,Response:c},a.dispatchEvent(a.CMS_AfterFormPaymentHandled))}a.getAttribute("name");let e=a["g-recaptcha-response-v3"]?"customFormSubmit":"submit";a.dataset.form_submitted=!1;a.addEventListener(e,
function(c){c.preventDefault();c=c.target;"true"!==c.dataset.form_submitted?(a.CMS_AfterFormPaymentHandled=new Event("CMS_AfterFormPaymentHandled",{cancelable:!0}),c.CMS_CustomSubmit||(a.CMS_CustomSubmit=new Event("CMS_CustomSubmit",{cancelable:!0})),c.dataset.form_submitted=!0,a.CMS_CustomSubmit.data={form:c},a.dispatchEvent(a.CMS_CustomSubmit)):alert("Form submission is in progress.")});a.addEventListener("CMS_CustomSubmit",function(a){a.defaultPrevented?a.data.form.dataset.form_submitted=!1:b(a.data)});
a.addEventListener("CMS_triggerHandlePayment",function(a){a.data.response?d(a.data.response,a.data.submitData):b(a.data.submitData)});a.addEventListener("CMS_AfterFormPaymentHandled",function(a){a.defaultPrevented||(window.location=a.data.FormRedirectLink)})})}function k(b,d){b=new URL(b);return(new URLSearchParams(b.search)).get(d)}function l(b){b=new URL(b);b=new URLSearchParams(b.search);let d=0;for(let a of b)d++;return d}document.addEventListener("DOMContentLoaded",function(b){setTimeout(()=>
{h()},0)})})();
