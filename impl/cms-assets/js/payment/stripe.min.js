'use strict';(function(){function h(){function c(a,b,c,d){if("CreditCard"===b){if(!g)throw Error("Missing stripe key");a.style.display="block";c.mount(`#paymentFields_${d}`)}else if("Free"===b||"Offline"===b)a.style.display="none",c.unmount(`#paymentFields_${d}`)}var b=document.forms;let d=document.scripts,g="",f=[];var a=window.paymentGatewaySettings;let h={style:{base:{backgroundColor:a?a.style.backgroundColor:"",color:a?a.style.color:"#32325d",fontSmoothing:a?a.style.fontSmoothing:"antialiased",
fontSize:a?a.style.fontSize:"16px",lineHeight:a?a.style.lineHeight:"16px","::placeholder":{color:a?a.style.placeholderColor:"#444"},iconColor:a?a.style.iconColor:"#32325d"},invalid:{color:a?a.style.invalidColor:"#fa755a",iconColor:a?a.style.invalidIconColor:"#fa755a"}},hideIcon:a?a.hideIcon:!1,iconStyle:a?a.iconStyle:"default",hidePostalCode:a?a.hidePostalCode:!0};for(a=0;a<b.length;a++)if(b[a].elements.Payment_Data){let c=b[a];var e=c.getAttribute("name");let d=`${e}_${a}`,g=document.getElementById(`paymentFields_${e}`);
e=document.getElementById(`paymentErrors_${e}`);g.id=`paymentFields_${d}`;e.id=`paymentErrors_${d}`;c.setAttribute("name",d);f.push(b[a])}for(b=0;b<d.length;b++)if(-1!==d[b].src.indexOf("/cms-assets/js/payment/stripe.min.js")){g=l(d[b].src,"key");break}f&&f.forEach((a)=>{let b=Stripe(g),d=b.elements(),f=a.getAttribute("name"),e=d.create("card",h),k=document.getElementById(`paymentFields_${f}`);c(k,a.elements.Payment_Type.value,e,f);a.elements.Payment_Type.onchange=function(b){b.preventDefault();c(k,
b.target.value,e,a.name)};a.addEventListener("submit",function(d){d.preventDefault();"CreditCard"===d.target.elements.Payment_Type.value?b.createToken(e).then(function(b){b.error?document.getElementById(`paymentErrors_${f}`).textContent=b.error.message:(a.elements.Payment_Data.value=b.token.id,a.submit())}):a.submit()})})}function m(){let c=document.querySelectorAll('[name="Payment_ItemQuantity"]');for(let b=0;b<c.length;b++)c[b].onchange=function(b){b.preventDefault();let c=b.target.closest("form").Payment_Amount;
b=+b.target.dataset.event_one_item_price*+b.target.value;for(let d=0;d<c.length;d++)c[d].value=b}}function l(c,b){c=new URL(c);return(new URLSearchParams(c.search)).get(b)}document.addEventListener("DOMContentLoaded",function(c){h();m()})})();
