'use strict';(function(){function h(){function c(b,a,c,d){if("CreditCard"===a){if(!g)throw Error("Missing stripe key");b.style.display="block";c.mount(`#paymentFields_${d}`)}else if("Free"===a||"Offline"===a)b.style.display="none",c.unmount(`#paymentFields_${d}`)}var a=document.forms;let d=document.scripts,g="",f=[];var b=window.paymentGatewaySettings;let h={style:{base:{backgroundColor:b.style.backgroundColor,color:b.style.color,fontSmoothing:b.style.fontSmoothing,fontSize:b.style.fontSize,lineHeight:b.style.lineHeight,
"::placeholder":{color:b.style.placeholderColor},iconColor:b.style.iconColor},invalid:{color:b.style.invalidColor,iconColor:b.style.invalidIconColor}},hideIcon:b.hideIcon,iconStyle:b.iconStyle,hidePostalCode:b.hidePostalCode};for(b=0;b<a.length;b++)if(a[b].elements.Payment_Data){let c=a[b];var e=c.getAttribute("name");let d=`${e}_${b}`,g=document.getElementById(`paymentFields_${e}`);e=document.getElementById(`paymentErrors_${e}`);g.id=`paymentFields_${d}`;e.id=`paymentErrors_${d}`;c.setAttribute("name",
d);f.push(a[b])}for(a=0;a<d.length;a++)if(-1!==d[a].src.indexOf("/cms-assets/js/payment/stripe.min.js")){g=l(d[a].src,"key");break}f&&f.forEach((b)=>{let a=Stripe(g),d=a.elements(),f=b.getAttribute("name"),e=d.create("card",h),k=document.getElementById(`paymentFields_${f}`);c(k,b.elements.Payment_Type.value,e,f);b.elements.Payment_Type.onchange=function(a){a.preventDefault();c(k,a.target.value,e,b.name)};b.addEventListener("submit",function(d){d.preventDefault();"CreditCard"===d.target.elements.Payment_Type.value?
a.createToken(e).then(function(a){a.error?document.getElementById(`paymentErrors_${f}`).textContent=a.error.message:(b.elements.Payment_Data.value=a.token.id,b.submit())}):b.submit()})})}function m(){let c=document.querySelectorAll('[name="Payment_ItemQuantity"]');for(let a=0;a<c.length;a++)c[a].onchange=function(a){a.preventDefault();let c=a.target.closest("form").Payment_Amount;a=+a.target.dataset.event_one_item_price*+a.target.value;for(let d=0;d<c.length;d++)c[d].value=a}}function l(c,a){c=new URL(c);
return(new URLSearchParams(c.search)).get(a)}document.addEventListener("DOMContentLoaded",function(c){h();m()})})();
